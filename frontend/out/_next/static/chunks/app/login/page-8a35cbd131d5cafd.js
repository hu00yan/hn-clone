(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{4794:(e,t,s)=>{"use strict";s.d(t,{iD:()=>r,kz:()=>n,tt:()=>i,xG:()=>a});let o="https://hn-clone-api.hacker-news-roo.workers.dev";async function a(){let e=await fetch("".concat(o,"/posts/hot"),{next:{revalidate:60}});if(!e.ok)throw Error("Failed to fetch posts");return e.json()}async function r(e,t){let s=await fetch("".concat(o,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error("Login failed");return s.json()}async function n(e,t,s){let a=await fetch("".concat(o,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,username:t,password:s})});if(!a.ok)throw Error("Registration failed");return a.json()}async function i(e,t,s,a){let r=await fetch("".concat(o,"/posts/submit"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({title:e,url:t,text:s})});if(!r.ok)throw Error("Failed to submit post");return r.json()}},6411:(e,t,s)=>{"use strict";var o=s(4371);s.o(o,"useRouter")&&s.d(t,{useRouter:function(){return o.useRouter}})},6786:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var o=s(8865),a=s(6853),r=s(6411),n=s(4794);function i(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),m=(0,r.useRouter)(),h=async t=>{t.preventDefault();try{c(!0);let t=await (0,n.iD)(e,s);localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),m.push("/")}catch(e){u("Invalid email or password"),console.error(e)}finally{c(!1)}};return(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Login"}),(0,o.jsxs)("form",{onSubmit:h,className:"max-w-md",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,o.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com",disabled:l})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,o.jsx)("input",{id:"password",type:"password",value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",disabled:l})]}),d&&(0,o.jsx)("div",{className:"text-red-500 text-sm mb-4",children:d}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50",disabled:l,children:l?"Logging in...":"Login"}),(0,o.jsx)("button",{type:"button",onClick:()=>m.push("/register"),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Register"})]})]})]})}},8343:(e,t,s)=>{Promise.resolve().then(s.bind(s,6786))}},e=>{e.O(0,[38,972,358],()=>e(e.s=8343)),_N_E=e.O()}]);