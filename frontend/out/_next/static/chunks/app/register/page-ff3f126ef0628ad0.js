(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{4064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(8865),r=s(6853),o=s(6411),n=s(4794);function i(){let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),b=(0,o.useRouter)(),p=async t=>{t.preventDefault();try{d(!0);let t=await (0,n.kz)(e,s,l);localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),b.push("/")}catch(e){h("Registration failed. Please try again."),console.error(e)}finally{d(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Register"}),(0,a.jsxs)("form",{onSubmit:p,className:"max-w-md",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com",disabled:u})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"yourusername",disabled:u})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:l,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",disabled:u})]}),m&&(0,a.jsx)("div",{className:"text-red-500 text-sm mb-4",children:m}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:opacity-50",disabled:u,children:u?"Registering...":"Register"}),(0,a.jsx)("button",{type:"button",onClick:()=>b.push("/login"),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Login"})]})]})]})}},4794:(e,t,s)=>{"use strict";s.d(t,{iD:()=>o,kz:()=>n,tt:()=>i,xG:()=>r});let a="https://hn-clone-api.hacker-news-roo.workers.dev";async function r(){let e=await fetch("".concat(a,"/posts/hot"),{next:{revalidate:60}});if(!e.ok)throw Error("Failed to fetch posts");return e.json()}async function o(e,t){let s=await fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error("Login failed");return s.json()}async function n(e,t,s){let r=await fetch("".concat(a,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,username:t,password:s})});if(!r.ok)throw Error("Registration failed");return r.json()}async function i(e,t,s,r){let o=await fetch("".concat(a,"/posts/submit"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({title:e,url:t,text:s})});if(!o.ok)throw Error("Failed to submit post");return o.json()}},6411:(e,t,s)=>{"use strict";var a=s(4371);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9352:(e,t,s)=>{Promise.resolve().then(s.bind(s,4064))}},e=>{e.O(0,[38,972,358],()=>e(e.s=9352)),_N_E=e.O()}]);