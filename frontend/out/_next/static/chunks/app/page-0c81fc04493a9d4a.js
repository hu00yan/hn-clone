(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1150:(e,t,s)=>{Promise.resolve().then(s.bind(s,4182))},4182:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(8865),a=s(6853),o=s(4794),r=s(3590),i=s.n(r);function c(e){let{post:t}=e,s=t.upvotes-t.downvotes;return(0,n.jsxs)("div",{className:"flex p-2 border-b border-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center mr-4",children:[(0,n.jsx)("button",{className:"text-gray-500 hover:text-orange-500",children:"▲"}),(0,n.jsx)("span",{className:"font-bold my-1",children:s}),(0,n.jsx)("button",{className:"text-gray-500 hover:text-blue-500",children:"▼"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-baseline",children:[(0,n.jsx)(i(),{href:"/post/".concat(t.id),className:"text-blue-600 hover:underline",children:t.title}),t.url&&(0,n.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",new URL(t.url).hostname,")"]})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[t.upvotes," points by ",t.author," |"," ",(0,n.jsx)(i(),{href:"/post/".concat(t.id),className:"hover:underline",children:"comments"})]})]})]})}function l(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{d()},[]);let d=async()=>{try{r(!0);let e=await (0,o.xG)();t(e)}catch(e){l("Failed to load posts"),console.error(e)}finally{r(!1)}};return s?(0,n.jsx)("div",{children:"Loading..."}):i?(0,n.jsx)("div",{className:"text-red-500",children:i}):(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsx)(c,{post:e},e.id))})}},4794:(e,t,s)=>{"use strict";s.d(t,{iD:()=>o,kz:()=>r,tt:()=>i,xG:()=>a});let n="https://hn-clone-api.hacker-news-roo.workers.dev";async function a(){let e=await fetch("".concat(n,"/posts/hot"),{next:{revalidate:60}});if(!e.ok)throw Error("Failed to fetch posts");return e.json()}async function o(e,t){let s=await fetch("".concat(n,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error("Login failed");return s.json()}async function r(e,t,s){let a=await fetch("".concat(n,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,username:t,password:s})});if(!a.ok)throw Error("Registration failed");return a.json()}async function i(e,t,s,a){let o=await fetch("".concat(n,"/posts/submit"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({title:e,url:t,text:s})});if(!o.ok)throw Error("Failed to submit post");return o.json()}}},e=>{e.O(0,[590,38,972,358],()=>e(e.s=1150)),_N_E=e.O()}]);